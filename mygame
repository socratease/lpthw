time = 5
timeisup = False
firstchoice = None

def endgame():
  print "Your game is over. Feel free to tempt fate again..."

def godoor():
  print "You push the door open. As you go inside,"
  wurmscare()
  print """
  Relieved, you exhale and turn to see a much larger room, with stone walls.
  In the middle of the room is a tiger, prowling in circles.
  The tiger wears a cheap conical paper party hat on his head.
  You also see two more things: a cask of wine, near a wall,
  and a trap door, near the middle of the room.
  """
  
def examinedoor():
  print """"
  That door is hellafancy! I mean, at least for a cave-door.
  It's carved with many arcane symbols.
  You lean in close to decipher the symbols. It's pretty dark, but then you see it:
  These are all just dicks and swastikas.
  """
  checktime(2)
  if timeisup:
    wurmdeath()
  else:
    start()
    
def goladder():
  print """
  
def examineladder():
  print """"
  This ladder is a bunch limbs tied together by rope.
  It's primitive, and pretty rotten.
  It leads above you, obviously, but it's too dark to tell where it goes.
  """
  checktime(2)
  if timeisup:
    wurmdeath()
  else:
    start()
  
def gohole():
  print "This is the go ladder function.."
  
def examinehole():
  print """
  This hole is more like a pit. 
  It's not very deep—the bottom is about 10 feet down—
  and the wall has footholds so you can climb down safely.
  Opposite the climbable wall, you can tell there's a tunnel leading under
  the room you're currently in.
  """
  checktime(2)
  if timeisup:
    wurmdeath()
  else:
    start()
    
def wurmdeath():
  print """
  A monstrous wurm bursts from the wall.
  He doesn't think twice before sucking your organs out through your mouth.
  You probably should've gotten out of there before he smelled you..."""
  endgame()

def wurmscare():
  print """
  A monstrous wurm bursts from the wall in the room you were jsut in.
  He's pissed that he missed dinner, but seems reluctant to follow you...
  You got out of there just in time.
  """

def starvation():
  print """
  In fact, you've wasted so much time that you starved to death.
  I SAID you were hungry...
  """
  endgame()
  
def checktime(limit):
  global time, timeisup
  time -= 1
  if time <= limit:
    timeisup = True
  else:
    print "..."

def startchoice(x): 
  while True:
    print "Would you like to examine the %s, or just go that way?" % x
    global firstchoice
    choice = raw_input('>')
  
    if "examine" in choice:
      firstchoice = "examine"
      break
    elif  "go" in choice:
      firstchoice = "go"
      break
    else:
      print """
      Sure, you do that, whatever... 
      but you're WASTING TIME.
      """ % x
      checktime(3)
      if timeisup:
        wurmdeath()

def starttext():
  print """
  You are in a dark cave. 
  How did you get there?
  You know you don't like camping...
  Oh well. You're hungry, so it's time to go home.
  """
  start()
  
def start():
  print """
  You see:
    1. close to you: A door
    2. other side of the room: a ladder
    3. other side of the room: a large hole in the ground
    
  What is interesting?
  """
  while True: 
    next = raw_input("> ")
    global firstchoice, time, timeisup
    if "door" in next:
      
       startchoice("door")
        
       if firstchoice is "examine":
         examinedoor()
       elif firstchoice is "go":
         godoor()
       else:
          print "It is broken :("
          
    elif "ladder" in next:
        startchoice("ladder")
        
        if firstchoice is "examine":
          examineladder()
        elif firstchoice is "go":
          goladder()
        else:
          print "It is broken :("
          
    elif "hole" in next:
        startchoice("hole")
        
        if firstchoice is "examine":
         examinehole()
        elif firstchoice is "go":
         gohole()
        else:
         print "It is broken :("
         
    else: 
      print "You're wasting time..."
      checktime(3)
      if timeisup:
          starvation()
    
starttext()
